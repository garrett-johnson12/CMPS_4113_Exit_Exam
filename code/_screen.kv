#:kivy 2.1.0
#:import Factory kivy.factory.Factory
WindowManager:
    FirstWindow:

    SecondWindow:

    ThirdWindow:


<FirstWindow>:
    name:"first"
    BoxLayout:
        orientation: "vertical"
        padding: "10dp"
        spacing: "25dp"
        Image:
            source:"./images/title2.png"
            size_hint:1,.05
        Button:
            text: "New Exam"
            size_hint : .5, None
            pos_hint: {"center_x":.5,"top":1}
            # color:"black"
            background_color:"#4fc3f7"
            # background_normal:''
            on_release:            
                app.root.current = "second"
        Button:
            text: "Load Exam"
            size_hint : .5, None
            pos_hint: {"center_x":.5,"top":1}
            # color:"black"
            background_color:"#4fc3f7"
            # background_normal:''
            on_release: Factory.loadPopUp().open()
        # Spinner:
        #     size_hint : .5, None
        #     id: "Concept Selection"
        #     text: "Concept Selection"
        #     pos_hint: {"center_x":.5,"top":1}
        #     # color:"black"
        #     background_color:"#4fc3f7"
        #     # background_normal:''
        #     values: ["Discrete Structures", "Programming", "Software Engineering"]
        Button:
            size_hint:.5, None
            pos_hint: {"center_x":.5,"top":1}
            text: "About"
            # color:"black"
            background_color:"#4fc3f7"
            # background_normal:''
            on_release: Factory.aboutPopUp().open()




<SecondWindow>:
    name:"second"
    
    BoxLayout:
        orientation:"vertical"
        
        BoxLayout:
            orientation:"horizontal"
            size_hint:1,.5
            padding: "15dp"
            spacing: "25dp"
            
            
            Button:
                pos_hint:{"top":1}
                size_hint:.33,.5
                font_size:14
                font_name:"Arial"
                text:"Help"
                color:"black"
                bold: True
                background_color: "#ffb678"
                background_normal:''
                on_press:Factory.helpPopUp().open()

            Button:
                pos_hint:{"top":1}
                size_hint:.33,.5
                font_size:14
                font_name:"Arial"
                text:"Select a Question"
                color:"black"
                bold: True
                background_color: "#4fc3f7"
                background_normal:''
                # on_press: root.changeQuestion()
            
            Button:
                pos_hint:{"top":1}
                size_hint:.33,.5
                font_size:14
                font_name:"Arial"
                bold: True
                text:"Close and Save"
                color:"black"
                background_normal:''
                background_color: "#ff8886"
                on_release: Factory.savePopUp().open()
        
        ScrollView:
            BoxLayout:
                orientation:"vertical"
                spacing:"15dp"
                padding:"50dp"
                size_hint:1,None
                height:self.minimum_height
                Label:
                    id: question_box
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:root.getInitialQuestion()
                    
                    
        # Add Marker Label to indicate a seperate set of elements
        Label:
            size_hint:1,.25
            id: Answer_Instructions
            text: "Please Select an Answer"
            halign: 'center'
            valign: 'middle'
            font_size:18
        # This is for the answer options
        ScrollView:
            # Place the Answers in Labels and add radio boxes next to them
            # with a grid layout
            GridLayout:
                cols:2
                rows:4
                size_hint:1,None
                height:self.minimum_height
                spacing:"15dp"
                padding:"50dp"
                
                Label:
                    id:AnswerSelection_A
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:root.getInitAnsA()
                    
                CheckBox:
                    group:"selected_answer"
                    id:box_1
                    halign: 'right'
                    valign: 'middle'
                    state: 'normal'
                    # on_active:root.selection(self,self.active,'A')
                Label:
                    id:AnswerSelection_B
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:root.getInitAnsB()
                    
                CheckBox:
                    group:"selected_answer"
                    id:box_2
                    halign: 'right'
                    valign: 'middle'
                    state: 'normal'
                    # on_active:root.selection(self,self.active,'B')
                Label:
                    id:AnswerSelection_C
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:root.getInitAnsC()
                CheckBox:
                    group:"selected_answer"
                    id:box_3
                    halign: 'right'
                    valign: 'middle'
                    state: 'normal'
                    # on_active:root.selection(self,self.active,'C')
                Label:
                    id:AnswerSelection_D
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:root.getInitAnsD()
                CheckBox:
                    group:"selected_answer"
                    id:box_4
                    halign: 'right'
                    valign: 'middle'
                    state: 'normal'
                    # on_active:root.selection(self,self.active,'D')

        BoxLayout:
            orientation:"horizontal"
            size_hint:1,.5
            padding: "10dp"
            spacing: "25dp"
            Button:
                id:prev
                pos_hint:{"bottom":1}
                size_hint:.25,.5
                halign: 'center'
                valign: 'middle'
                font_size:14
                font_name:"Arial"
                text:"Previous Question"
                color:"black"
                background_color: "#73be73"
                background_normal:''
                disabled: root.btn_state
                
                # on_release:root.prevQuestion()
            Button:
                id: next
                pos_hint:{"bottom":1}
                size_hint:.25,.5
                halign: 'center'
                valign: 'middle'
                font_size:14
                font_name:"Arial"
                text:"Next Question"
                color:"black"
                background_color: "#73be73"
                background_normal:''
                
                # Need to get the current question when hitting the button
                on_release: 
                    root.changeQuestion()
                    root.resetButtons()
                    root.summary()

<ThirdWindow>:
    name:'third'
    BoxLayout:
        orientation:"vertical"
        padding:"10dp"
        Label:
            id:Summary
            text:'Summary'
            color:'white'
            font_size:24
            font_family:'Arial'
            size_hint:(1,.5)
            pos_hint:{"center_x":.5}
            canvas.before:
                Color:
                    rgba:(112/255,112/255,112/255,1)
                Rectangle:
                    size:self.size
                    pos:self.pos
        Label:
            id:corrAns
            text:'Questions Answered Correctly: 3/16'
            color:'white'
            font_size:24
            font_family:'Arial'
            size_hint:(1,.5)
            pos_hint:{"center_x":.5}
            canvas.before:
                Color:
                    rgba:(96/255,96/255,96/255,1)
                Rectangle:
                    size:self.size
                    pos:self.pos
        Label:
            id:percent
            text:'Percentage: 18.75%'
            color:'white'
            font_size:24
            font_family:'Arial'
            size_hint:(1,.5)
            pos_hint:{"center_x":.5}
            canvas.before:
                Color:
                    rgba:(72/255,72/255,72/255,1)
                Rectangle:
                    size:self.size
                    pos:self.pos
        # Label:
        #     id:
        #     text:''
        Button:
            text:'Close'
            color:'black'
            font_size:24
            font_family:'Arial'
            background_color:'#ff8886'
            background_normal:''
            size_hint:(.75,.15)
            pos_hint:{'center_x':.5}
            on_release:app.close_application()

<helpPopUp@Popup>:
    auto_dismiss: True
    title: ""
    separator_height:0
    title_size:18
    size_hint: .6,.8
    pos_hint:{"center_x":.5,"center_y":.5}
    BoxLayout:
        orientation:"vertical"
        padding:"10dp"
        spacing:"25dp"
        ScrollView:
            GridLayout:
                cols:2
                row: 6
                size_hint: 1,None
                height: self.minimum_height
                padding: "15dp"
                spacing: "25dp"
                Image:
                    source: "./images/close&save.jpg"
                Label:
                    id:Close
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    
                    halign: 'center'
                    valign: 'middle'
                    text:"This button allows you to save your current exam, then takes you back to the Main Menu"
                    
                Image:
                    source: "./images/selectQ.jpg"
                Label:
                    id:selQ
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    
                    halign: 'center'
                    valign: 'middle'
                    text:"This button allows you to select a specific question"
                       
                Image:
                    source: "./images/questionBox2.jpg"
                    size_hint:2,2
                Label:
                    id:qBox
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:"This area is where the question will appear"
                    
                Image:
                    source: "./images/answerfield2.jpg"
                    size_hint:2,2
                Label:
                    id:answerField
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:"This area is where you can select answer"
                  
                Image:
                    source: "./images/prev.jpg"
                    size_hint:2,2
                Label:
                    id:answerField
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:"This button takes you to the previous question"
                   
                Image:
                    source: "./images/next.jpg"
                    size_hint:2,2
                Label:
                    id:answerField
                    font_size:18
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'middle'
                    text:"This button takes you to the next question"
                    
        Button:
            text:"Close"
            font_size:24
            font_name:"Arial"
            bold: True
            background_color: "ff8886"
            background_normal:''
            size_hint:.5,.15
            pos_hint:{"center_x":.5,"bottom":1}
            on_release:root.dismiss()


# Popup Configs for the about button on the Title Screen
<aboutPopUp@Popup>:
    auto_dismiss: True
    title: ""
    separator_height:0
    title_size:18
    size_hint: .6,.8
    pos_hint:{"center_x":.5,"center_y":.5}
    BoxLayout:
        orientation:"vertical"
        size_hint: 1,1
        height:self.minimum_height
        padding: "15dp"
        spacing: "25dp"
        Label:
            id:About
            font_size:18
            size_hint_y: None
            text_size: self.width, None
            height: self.texture_size[1]
            halign: 'center'
            valign: 'top'
            color:'black'
            text:"Exit Exam Testing Application\n This application was designed with the intent to test Computer Science studenets over various related concepts.\n Project Vesion: 1.0\n Owner: Dr.Stringfellow\n Developers:\n Garret Johnson: Frontend Developer\n Jose Soto: Backend Developer\n Chris Anthony: Bookkeeper\n Sandesh Pathak: Bookkeeper\n"
            canvas.before:
                Color:
                    rgba:(1,1,1,1)
                Rectangle:
                    size:self.size
                    pos:self.pos
        Button:
            text:"Close"
            font_size:24
            font_name:"Arial"
            bold: True
            background_color: "ff8886"
            background_normal:''
            # size_hint:.5,.5
            # pos_hint:{"center_x":.5,"bottom":1}
            on_release:root.dismiss()


# Popup configs for the load button on the Title screen
<loadPopUp@Popup>:
    auto_dismiss: True
    title: "Sorry. Feature will be added in newer version!"
    title_size:18
    size_hint: .6,.4
    pos_hint:{"center_x":.5,"center_y":.5}
    Button:
        text:"Close"
        font_size:14
        font_name:"Arial"
        bold: True
        background_color: "ff8886"
        background_normal:''
        size_hint:1,0.3
        pos_hint:{"center_y":.5}
        on_release:root.dismiss()


# Popup configs for the close and save button on the 
<savePopUp@Popup>:
    auto_dismiss: True
    title: "Would you like to save your progress?"
    title_size:18
    size_hint: .35,.3
    pos_hint:{"right":.9,"top":.9}
    BoxLayout:
        orientation:"horizontal"
        size_hint: 1,.8
        padding: "15dp"
        spacing: "25dp"
        Button:
            text:"Yes"
            font_size:14
            font_name:"Arial"
            bold: True
            background_color: "73be73"
            background_normal:''
            size_hint:.5,1
            on_release: 
                root.dismiss()
                app.root.current = "first"
        Button:
            text:"No"
            font_size:14
            font_name:"Arial"
            bold: True
            background_color: "ff8886"
            background_normal:''
            size_hint:.5,1
            on_release:root.dismiss()